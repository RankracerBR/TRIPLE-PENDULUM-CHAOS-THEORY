{% load static %}
<!DOCTYPE html>
<head>
    <center>
    <h1>Envie a sua Mensagem</h1> 
    </center>    
    <br>
</head>
<body>
    <form id="contact-form" method="POST">{%csrf_token%}
    <center>
        <label for="name"><h5>Nome:</h5></label>
        <input type="text" placeholder="Digite seu nome" name="name"><br>
        <br>
        <label for="name"><h5>Email:</h5></label>
        <input type="email" placeholder="Digite seu email" name="email"><br>
        <br>
        <h5 position="left">Mensagem:</h5>
        <center>
        <textarea type="message" placeholder="Digite sua mensagem" name="message" rows="10" cols="50"></textarea>
        </center>
        <input type="submit">
    </center>

    <script>
        const form = document.getElementById('contact-form');

        form.addEventListener('submit', function(event) {
            event.preventDefault();

            const name = form.elements.name.value;
            const email = form.elements.email.value;
            const message = form.elements.message.value;

            if (!name || !email || !message) {
                alert('Por favor, preencha todos os campos antes de enviar!');
                return;
            }

            const formData = new FormData(form);
            fetch(form.action, {
                method: form.method,
                body: formData,
                headers: {
                    'X-CSRFToken': '{{ csrf_token }}'
                }
            })
            .then(response => {
                if (response.ok) {
                    alert('Mensagem enviada com sucesso!');
                    window.location.href = '/index2';
                } else {
                    alert('Houve um erro ao enviar a mensagem. Por favor, tente novamente.');
                }
            })
            .catch(error => {
                console.error('Erro ao enviar a mensagem:', error);
                alert('Houve um erro ao enviar a mensagem. Por favor, tente novamente.');
            });
        });
    </script>
    </form>
</body>